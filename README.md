# Ping - CLI
## Pinging tool
#### Версия Ruby

- Ruby >= 2.4

#### Установка зависимостей:
1. Установка необходимых гемов:

```
bundle
```

2. Прогон миграций для СУБД:

```
bundle exec rake:db migrate
```

#### Запуск приложения:
Для запуска скрипта требуется ввести в консоль следующие команды из корневой папки приложения:
1. Для работы в фоновом режиме:

```
ruby ping.rb
```

2. Для работы утилиты в консоли в видимом режиме:
```
ruby main.rb
```

Для данного режима доступна возможность установки интервала запросов. Интервал указывается в секундах:

```
ruby main.rb 60
```

В данном примере интервал между запросами будет составлять 60 сек.

#### Команды
Рассмотрим примеры команд, которые необходимо вводить в консоли из корневой папки:
1. Добавление хоста:
```
rake hosts:add[8.8.8.8]
```
2. Удаление хоста:
```
rake hosts:delete[8.8.8.8]
```
3. Сбор статистики за определенный интервал времени:
```
rake report['8.8.8.8','2017-05-01 23:12:20','2017-05-02 23:12:20']
```
4. Работа с ActiveRecord в IRB-сессии
```
./bin/console
```
#### Формат получаемой статистики
Пример тела сообщения:
```
{
  "hostname":"8.8.8.8",
  "avg_response_ms":14,
  "min_response_ms":11,
  "max_response_ms":31,
  "percent_lost_pings":75
}
```
, где:

`hostname` - имя хоста, IP

`avg_response_ms` - среднее время ответа

`min_response_ms` - минимальное время ответа

`max_response_ms` - максимальное время ответа

`percent_lost_pings` - процент потерь пакетов

за указанный период

#### Тестирование:
для запуска тестов:
```
rspec spec
```
